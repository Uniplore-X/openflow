package openiap;
syntax = "proto3";
import "google/protobuf/timestamp.proto";
import "google/protobuf/any.proto";
import "google/protobuf/struct.proto";
import "querys.proto";
import "watch.proto";
service grpcService {
  rpc RPC (envelope) returns (envelope) {}
  rpc ReceiveStream (envelope) returns (stream envelope) {}
  rpc SendStream (stream envelope) returns (envelope) {}
}
message envelope {
  string command = 1;
  int32 priority = 2;
  int32 seq = 3;
  string hash = 4;
  string id = 5;
  string rid = 6;
  string traceid = 7;
  string spanid = 8;
  bytes data = 9;
}
message noop {}
message ping {}
message pong {}
message error {
  string message = 1;
  int32 code = 2;
  string stack = 3;
}
message getelement {
  string xpath = 1;
}
message send {
  int32 count = 1;
}
message download {
  string filename = 1;
}
message upload {
  string filename = 1;
  int32 bytes = 2;
  int32 chunks = 3;
  float mb = 4;
  int32 elapsedTime = 5;
  float mbps = 6;
}
message console { }
message clientconsole { }
message beginstream { 
  string checksum = 1;
  stat stat = 2;
}
message stream { 
  bytes data = 1;
}
message endstream { }

message stat {
  float birthtimeMs = 1;
  int32 blksize = 2;
  int32 blocks = 3;
  google.protobuf.Timestamp ctime = 4;
  float ctimeMs = 5;
  int32 dev = 6;
  int32 gid = 7;
  int32 ino = 8;
  int32 mode = 9;
  google.protobuf.Timestamp mtime = 10;
  float mtimeMs = 11;
  int32 nlink = 12;
  int32 rdev = 13;
  int32 size = 14;
  int32 uid = 15;
}
message customcommand {
  string command = 1;
  string id = 2;
  string name = 3;
  string data = 4;
}
message customcommandreply   {
  bytes result = 1;
}
message signin {
  string username = 1;
  string password = 2;
  string jwt = 3;
  user user = 4;
  bool ping = 5;
}
message signinreply {
  string jwt = 3;
  user user = 4;
}
message refreshtoken {
  string username = 1;
  string jwt = 2;
  user user = 3;
}
message role {
  string _id = 1;
  string name = 2;
}
message user {
  string _id = 1;
  string name = 2;
  string username = 3;
  string email = 4;
  repeated role roles = 5;
}
